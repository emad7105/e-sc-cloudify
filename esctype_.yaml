node_types:

  workflow_service:
    derived_from: cloudify.nodes.ApplicationModule
    properties:
      block_description:
        description: Description of the block function
        type: string
      block_name:
        type: string
      block_category:
        type: string
      service_type:
        type: string

  importfile:
    derived_from: workflow_service
    properties:
      Source:
        type: string
        default: ''
      DebugMode:
        type: boolean
        default: false
      output-1:
        type: string
        default: file-wrapper

  exportfile:
    derived_from: workflow_service
    properties:
      targetfolder:
        type: string
        default: ''
      automaticfolder:
        description: save this data set to the automatic workflow directory
        type: boolean
        default: true
      savetolastimportfolder:
        description: Use the last folder that had data imported from it by this workflow.
        type: boolean
        default: false
      Comments:
        description: Comments to attach to data files
        type: string
        default: Saved data
      makepublic:
        description: make uploaded files public
        type: boolean
        default: false
      savetosubdirectory:
        description: Save the results to a subdirectory of the target folder
        type: boolean
        default: false
      Subdirectory:
        description: Subdirectory to save results to
        type: string
        default: processed
      uploadmetadata:
        description: Should this block attach the metadata that has been propagated into it to the uploaded files
        type: boolean
        default: false
      #input:
      file-list:
        type: string
        default: file-wrapper
      # service outputs
      file-ids:
        type: string
        default: data-wrapper
      file-references:
        type: string
        default: link-wrapper

  mega-nj:
    derived_from: workflow_service
    properties:
      testofphylogeny:
        type: string
        default: Bootstrapmethod
      no-ofbootstrapreplications:
        type: integer
        default: 1000
      model/method:
        type: string
        default: Kimura 2-parameter model
      substitutionstoinclude:
        type: string
        default: 'd: Transitions + Transversions'
      ratesamongsites:
        type: string
        default: Uniformrates        
      gammaparameter:
        type: integer
        default: 1
      gaps/missingdatatreatment:
        type: string
        default: ''
        # constraints:
        #  - valid_values: ['Complete deletion','Pairwise deletion','Partial deletion']
      sitecoveragecutoff(%):
        type: integer
        default: 95
      #inputs
      input-data:
        type: string
        default: file-wrapper
      # service output
      analysis-output:
        type: string
        default: file-wrapper
      consensus-output:
        type: string
        default: file-wrapper
      summary-info:
        type: string
        default: file-wrapper
  
  spec_library:
    derived_from: cloudify.nodes.ApplicationModule
    properties:
      version:
        type: string
        default: ''
      OS-type:
        type: string
        default: Linux

  javaruntime:
    derived_from: spec_library

  corelibrary:
    derived_from: spec_library
    properties:
      version:
        type: string
        default: 3.0

  MegaCC:
    derived_from: spec_library
    properties:
      version:
        type: string
        default: 6.0

relationships:

  FileWrapperLink:
    derived_from: cloudify.relationships.depends_on
    source_interfaces:
      cloudify.interfaces.relationship_lifecycle:
          preconfigure:
              implementation: scripts/file-preconfigure.sh
